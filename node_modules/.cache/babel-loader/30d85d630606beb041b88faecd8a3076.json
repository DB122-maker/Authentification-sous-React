{"ast":null,"code":"import _defineProperty from \"C:\\\\Users\\\\Chikosgear\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\react-scripts\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"C:\\\\Users\\\\Chikosgear\\\\Desktop\\\\react-j5-auth-master\\\\src\\\\components\\\\login.jsx\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { Component } from \"react\";\nimport NavBar from \"./navbar\";\nimport axios from \"axios\";\n\nclass Login extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      credentials: {\n        login: \"\",\n        password: \"\"\n      },\n      errors: \"\"\n    };\n\n    this.connexion = async e => {\n      e.preventDefault(); // eviter de recharger la page lorsque l'on clique sur le bouton Connexion\n\n      console.log(_objectSpread({}, this.state.credentials)); // https://nameless-retreat-19640.herokuapp.com/api/connexion\n      // POST\n      // {\n      //\"login\" : \"test@yahoo.fr\" ,\n      //\"mdp\" : \"azerty\"\n      //}\n      // axios => yarn add axios\n\n      try {\n        // les logins et mot de passe sont OK\n        const result = await axios.post(\"https://nameless-retreat-19640.herokuapp.com/api/connexion\", {\n          login: this.state.credentials.login,\n          // test@yahoo.fr\n          mdp: this.state.credentials.password // azerty\n\n        });\n        localStorage.setItem(\"token\", result.data.token); // redirection\n        // lorsque l'on avait un bouton de sauvegarde\n        // props vient du composant Route\n\n        this.props.history.push(\"/admin\");\n      } catch (ex) {\n        // si les login et mot de passe sont KO\n        this.setState({\n          errors: ex.response.data.msg\n        });\n      }\n    };\n\n    this.change = e => {\n      const _e$target = e.target,\n            name = _e$target.name,\n            value = _e$target.value; // permet de récupérer le nom du champ utilisé ainsi que la valeur saisie dans le champ du formulaire\n\n      const newCredentials = _objectSpread({}, this.state.credentials); // clone du state\n\n\n      newCredentials[name] = value; // stocke les valeurs saisies dans le clone\n\n      this.setState({\n        credentials: newCredentials\n      });\n    };\n  }\n\n  render() {\n    return React.createElement(React.Fragment, null, React.createElement(\"section\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-md-8 offset-md-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59\n      },\n      __self: this\n    }, React.createElement(NavBar, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60\n      },\n      __self: this\n    }))), React.createElement(\"section\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-md-8 offset-md-2 my-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      onSubmit: this.connexion,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"login\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }, \"Login\"), React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      id: \"login\",\n      placeholder: \"login\",\n      value: this.state.credentials.login,\n      onChange: this.change,\n      name: \"login\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"password\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }, \"Password\"), React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      id: \"password\",\n      placeholder: \"password\",\n      value: this.state.credentials.password,\n      onChange: this.change,\n      name: \"password\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"form-group text-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"btn btn-primary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, \"Connexion\"))), this.state.errors && React.createElement(\"div\", {\n      className: \"alert alert-danger\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }, this.state.errors))));\n  }\n\n}\n\nexport default Login;","map":{"version":3,"sources":["C:/Users/Chikosgear/Desktop/react-j5-auth-master/src/components/login.jsx"],"names":["React","Component","NavBar","axios","Login","state","credentials","login","password","errors","connexion","e","preventDefault","console","log","result","post","mdp","localStorage","setItem","data","token","props","history","push","ex","setState","response","msg","change","target","name","value","newCredentials","render"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport NavBar from \"./navbar\";\r\nimport axios from \"axios\";\r\n\r\nclass Login extends Component {\r\n  state = {\r\n    credentials: { login: \"\", password: \"\" },\r\n    errors: \"\"\r\n  };\r\n\r\n  connexion = async e => {\r\n    e.preventDefault(); // eviter de recharger la page lorsque l'on clique sur le bouton Connexion\r\n\r\n    console.log({ ...this.state.credentials });\r\n\r\n    // https://nameless-retreat-19640.herokuapp.com/api/connexion\r\n    // POST\r\n    // {\r\n    //\"login\" : \"test@yahoo.fr\" ,\r\n    //\"mdp\" : \"azerty\"\r\n    //}\r\n\r\n    // axios => yarn add axios\r\n\r\n    try {\r\n      // les logins et mot de passe sont OK\r\n      const result = await axios.post(\r\n        \"https://nameless-retreat-19640.herokuapp.com/api/connexion\",\r\n        {\r\n          login: this.state.credentials.login, // test@yahoo.fr\r\n          mdp: this.state.credentials.password // azerty\r\n        }\r\n      );\r\n\r\n      localStorage.setItem(\"token\", result.data.token);\r\n\r\n      // redirection\r\n      // lorsque l'on avait un bouton de sauvegarde\r\n      // props vient du composant Route\r\n      this.props.history.push(\"/admin\");\r\n    } catch (ex) {\r\n      // si les login et mot de passe sont KO\r\n\r\n      this.setState({ errors: ex.response.data.msg });\r\n    }\r\n  };\r\n\r\n  change = e => {\r\n    const { name, value } = e.target; // permet de récupérer le nom du champ utilisé ainsi que la valeur saisie dans le champ du formulaire\r\n    const newCredentials = { ...this.state.credentials }; // clone du state\r\n    newCredentials[name] = value; // stocke les valeurs saisies dans le clone\r\n\r\n    this.setState({ credentials: newCredentials });\r\n  };\r\n  render() {\r\n    return (\r\n      <>\r\n        <section className=\"row\">\r\n          <div className=\"col-md-8 offset-md-2\">\r\n            <NavBar />\r\n          </div>\r\n        </section>\r\n        <section className=\"row\">\r\n          <div className=\"col-md-8 offset-md-2 my-3\">\r\n            <form onSubmit={this.connexion}>\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"login\">Login</label>\r\n                <input\r\n                  type=\"text\"\r\n                  className=\"form-control\"\r\n                  id=\"login\"\r\n                  placeholder=\"login\"\r\n                  value={this.state.credentials.login}\r\n                  onChange={this.change}\r\n                  name=\"login\"\r\n                />\r\n              </div>\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"password\">Password</label>\r\n                <input\r\n                  type=\"text\"\r\n                  className=\"form-control\"\r\n                  id=\"password\"\r\n                  placeholder=\"password\"\r\n                  value={this.state.credentials.password}\r\n                  onChange={this.change}\r\n                  name=\"password\"\r\n                />\r\n              </div>\r\n              <div className=\"form-group text-center\">\r\n                <button type=\"submit\" className=\"btn btn-primary\">\r\n                  Connexion\r\n                </button>\r\n              </div>\r\n            </form>\r\n            {this.state.errors && (\r\n              <div className=\"alert alert-danger\">{this.state.errors}</div>\r\n            )}\r\n          </div>\r\n        </section>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Login;\r\n"]},"metadata":{},"sourceType":"module"}